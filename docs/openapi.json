{
  "openapi": "3.1.0",
  "info": {
    "title": "CCDI Federation Service API",
    "description": "REST API for querying CCDI-DCC  graph database",
    "version": "1.0.0",
    "summary": "Childhood Cancer Data Initiative Federation Service",
    "contact": {
      "name": "CCDI Development Team",
      "email": "support@ccdi.org",
      "url": "https://github.com/CBIIT/ccdi-dcc-federation-service"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    },
    "termsOfService": "https://your-server.com/terms"
  },
  "servers": [
    {
      "url": "http://localhost:8000/api/v1",
      "description": "Local development server (default)"
    },
    {
      "url": "https://your-server.com/api/v1",
      "description": "Production server"
    },
    {
      "url": "https://ccdi-federation-test.test.com/api/v1",
      "description": "Test server - For online testing"
    }
  ],
  "paths": {
    "/subject": {
      "get": {
        "summary": "List subjects",
        "description": "Get paginated list of subjects with optional filtering",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "description": "Items per page",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "sex",
            "in": "query",
            "description": "Matches any subject where the `sex` field matches the string provided.",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "F",
                "M",
                "U"
              ],
              "default": "M"
            },
            "example": "M"
          },
          {
            "name": "race",
            "in": "query",
            "description": "Matches any subject where any member of the `race` field matches the\nprovided value. The race field in the database may contain semicolon-separated\nvalues (e.g., 'Asian;White'), and the filter will match if the provided\nvalue is found within those values.",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "Not allowed to collect",
                "Native Hawaiian or other Pacific Islander",
                "Not Reported",
                "Unknown",
                "American Indian or Alaska Native",
                "Asian",
                "Black or African American",
                "White"
              ]
            },
            "example": "White"
          },
          {
            "name": "ethnicity",
            "in": "query",
            "description": "Matches any subject where the `ethnicity` field matches the string\nprovided. Ethnicity is derived from race values: if race contains\n\"Hispanic or Latino\", ethnicity is \"Hispanic or Latino\"; otherwise\n\"Not reported\". Only these two values are accepted.",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "Hispanic or Latino",
                "Not reported"
              ]
            },
            "example": "Hispanic or Latino"
          },
          {
            "name": "identifiers",
            "in": "query",
            "description": "Matches any subject where any member of the `identifiers` field matches\nthe string provided.\n\n**Note:** a logical OR (`||`) is performed across the values when\ndetermining whether the subject should be included in the results.",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "vital_status",
            "in": "query",
            "description": "Matches any subject where the `vital_status` field matches the string\nprovided. Valid values are: Alive, Dead, Not Reported, Unknown.",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "Alive",
                "Dead",
                "Not Reported",
                "Unknown"
              ]
            },
            "example": "Alive"
          },
          {
            "name": "age_at_vital_status",
            "in": "query",
            "description": "Matches any subject where the `age_at_vital_status` field matches the\ninteger value provided. The age is stored in days (e.g., 3650 days = ~10 years).\nMust be a valid non-negative integer.",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0
            },
            "example": 3650
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubjectResponse"
                }
              }
            }
          }
        }
      }
    },
    "/subject/{org}/{ns}/{name}": {
      "get": {
        "summary": "Get subject by identifier",
        "description": "Get a specific subject by organization, namespace, and name. For CCDI-DCC/phs (case-insensitive), supports participant ID search with multiple IDs (comma-separated).",
        "parameters": [
          {
            "name": "org",
            "in": "path",
            "description": "Organization name (must be 'CCDI-DCC')",
            "required": true,
            "schema": {
              "type": "string",
              "default": "CCDI-DCC"
            },
            "example": "CCDI-DCC"
          },
          {
            "name": "ns",
            "in": "path",
            "description": "Namespace name (must be 'phs', case-insensitive)",
            "required": true,
            "schema": {
              "type": "string",
              "default": "phs"
            },
            "example": "phs"
          },
          {
            "name": "name",
            "in": "path",
            "description": "Subject name or participant ID(s). For CCDI-DCC/phs, multiple IDs can be comma-separated.",
            "required": true,
            "schema": {
              "type": "string",
              "default": "TARGET-10-PAKKMW"
            },
            "example": "TARGET-10-PAKKMW"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/Subject"
                    },
                    {
                      "$ref": "#/components/schemas/SubjectResponse"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Subject not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorsResponse"
                },
                "examples": {
                  "notFound": {
                    "value": {
                      "errors": [
                        {
                          "kind": "NotFound",
                          "entity": "Subject"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/subject/summary": {
      "get": {
        "summary": "Get subject summary (counts)",
        "description": "Returns high-level counts for subjects. The total is the number of unique participants that match the current filters (if any). This endpoint is optimized for dashboards and headers where only counts are needed.",
        "responses": {
          "200": {
            "description": "Summary counts successfully returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SummaryResponse"
                },
                "example": {
                  "counts": {
                    "total": 104496
                  }
                }
              }
            }
          }
        }
      }
    },
    "/subject/by/{field}/count": {
      "get": {
        "summary": "Count subjects by field value",
        "description": "Returns counts of unique participants grouped by a specific field value. The response includes total count, missing count (participants with null values), and counts for each distinct field value. Valid fields include sex, race, ethnicity, vital_status, age_at_vital_status, and associated_diagnoses.",
        "parameters": [
          {
            "name": "field",
            "in": "path",
            "description": "Field name to count by. Case-sensitive.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "sex",
                "race",
                "ethnicity",
                "vital_status",
                "age_at_vital_status",
                "associated_diagnoses"
              ],
              "default": "sex"
            },
            "examples": {
              "sex": {
                "value": "sex",
                "summary": "Count by sex"
              },
              "race": {
                "value": "race",
                "summary": "Count by race"
              },
              "ethnicity": {
                "value": "ethnicity",
                "summary": "Count by ethnicity"
              },
              "vital_status": {
                "value": "vital_status",
                "summary": "Count by vital status"
              },
              "age_at_vital_status": {
                "value": "age_at_vital_status",
                "summary": "Count by age at vital status"
              },
              "associated_diagnoses": {
                "value": "associated_diagnoses",
                "summary": "Count by associated diagnoses"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Count results successfully returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CountResponse"
                },
                "example": {
                  "total": 25696,
                  "missing": 1069,
                  "values": [
                    {
                      "value": "M",
                      "count": 15234
                    },
                    {
                      "value": "F",
                      "count": 9393
                    },
                    {
                      "value": "U",
                      "count": 0
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Invalid field name or parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorsResponse"
                },
                "examples": {
                  "invalidField": {
                    "value": {
                      "errors": [
                        {
                          "kind": "UnsupportedField",
                          "field": "invalid_field",
                          "reason": "The field was not found in the metadata object."
                        }
                      ]
                    }
                  },
                  "invalidParameters": {
                    "value": {
                      "errors": [
                        {
                          "kind": "InvalidParameters",
                          "parameters": [
                            "id"
                          ],
                          "reason": "The parameter was a non-integer value."
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Resource not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorsResponse"
                },
                "examples": {
                  "notFound": {
                    "value": {
                      "errors": [
                        {
                          "kind": "NotFound",
                          "entity": "Subject"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/errors/examples": {
      "get": {
        "summary": "Error response examples",
        "description": "This endpoint provides example error responses for different error types.\nThis is a reference endpoint showing the structure of error responses\nthat may be returned by other endpoints.\n\n**Error Types:**\n- `InvalidRoute`: Returned when requesting a non-existent route\n- `InvalidParameters`: Returned when request parameters are invalid\n- `NotFound`: Returned when a requested resource is not found\n- `UnshareableData`: Returned when data cannot be shared due to agreements\n- `UnsupportedField`: Returned when a field is not supported for operations\n\nFor 400 or 404 errors, always use a customized response to avoid exposing\nany internal error messages or user inputs. Any error not covered by the\ncategories below should return a 404 NotFound error.\n",
        "tags": [
          "errors"
        ],
        "parameters": [
          {
            "name": "error_type",
            "in": "query",
            "description": "Type of error example to return",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "InvalidRoute",
                "InvalidParameters",
                "NotFound",
                "UnshareableData",
                "UnsupportedField",
                "all"
              ],
              "default": "all"
            },
            "examples": {
              "InvalidRoute": {
                "value": "InvalidRoute",
                "summary": "Invalid route error example"
              },
              "InvalidParameters": {
                "value": "InvalidParameters",
                "summary": "Invalid parameters error example"
              },
              "NotFound": {
                "value": "NotFound",
                "summary": "Not found error example"
              },
              "UnshareableData": {
                "value": "UnshareableData",
                "summary": "Unshareable data error example"
              },
              "UnsupportedField": {
                "value": "UnsupportedField",
                "summary": "Unsupported field error example"
              },
              "all": {
                "value": "all",
                "summary": "All error examples"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Error examples successfully returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorsResponse"
                },
                "examples": {
                  "allErrors": {
                    "summary": "All error examples",
                    "value": {
                      "errors": [
                        {
                          "kind": "InvalidRoute",
                          "method": "GET",
                          "route": "/foobar"
                        },
                        {
                          "kind": "InvalidParameters",
                          "parameters": [
                            "id"
                          ],
                          "reason": "The parameter was a non-integer value."
                        },
                        {
                          "kind": "NotFound",
                          "entity": "Samples"
                        },
                        {
                          "kind": "UnshareableData",
                          "entity": "Sample",
                          "reason": "Our agreement with data providers prohibits us from sharing line-level data."
                        },
                        {
                          "kind": "UnsupportedField",
                          "field": "field",
                          "reason": "The field was not found in the metadata object."
                        }
                      ]
                    }
                  },
                  "invalidRoute": {
                    "summary": "Invalid route error",
                    "value": {
                      "errors": [
                        {
                          "kind": "InvalidRoute",
                          "method": "GET",
                          "route": "/foobar"
                        }
                      ]
                    }
                  },
                  "invalidParameters": {
                    "summary": "Invalid parameters error",
                    "value": {
                      "errors": [
                        {
                          "kind": "InvalidParameters",
                          "parameters": [
                            "id"
                          ],
                          "reason": "The parameter was a non-integer value."
                        }
                      ]
                    }
                  },
                  "notFound": {
                    "summary": "Not found error",
                    "value": {
                      "errors": [
                        {
                          "kind": "NotFound",
                          "entity": "Samples"
                        }
                      ]
                    }
                  },
                  "unshareableData": {
                    "summary": "Unshareable data error",
                    "value": {
                      "errors": [
                        {
                          "kind": "UnshareableData",
                          "entity": "Sample",
                          "reason": "Our agreement with data providers prohibits us from sharing line-level data."
                        }
                      ]
                    }
                  },
                  "unsupportedField": {
                    "summary": "Unsupported field error",
                    "value": {
                      "errors": [
                        {
                          "kind": "UnsupportedField",
                          "field": "field",
                          "reason": "The field was not found in the metadata object."
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Subject": {
        "type": "object",
        "description": "Normalized participant entity returned by this service.",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/SubjectId"
          },
          "kind": {
            "type": "string",
            "example": "Participant",
            "const": "Participant"
          },
          "metadata": {
            "$ref": "#/components/schemas/SubjectMetadata"
          },
          "gateways": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": []
          }
        },
        "required": [
          "id",
          "kind",
          "metadata",
          "gateways"
        ],
        "examples": [
          {
            "id": {
              "namespace": {
                "organization": "CCDI-DCC",
                "name": "dbGaP_phs000465"
              },
              "name": "TARGET-10-PAKKMW"
            },
            "kind": "Participant",
            "metadata": {
              "sex": {
                "value": "Female",
                "ancestors": null
              },
              "race": [
                {
                  "value": "White",
                  "ancestors": null
                }
              ],
              "ethnicity": {
                "value": "Not reported",
                "ancestors": null
              },
              "identifiers": [
                {
                  "value": {
                    "namespace": {
                      "organization": "CCDI-DCC",
                      "name": "dbGaP_phs000465"
                    },
                    "name": "TARGET-10-PAKKMW",
                    "type": "Linked"
                  },
                  "ancestors": null
                }
              ],
              "associated_diagnoses": [
                {
                  "value": "Acute Lymphoblastic Leukemia, NOS",
                  "ancestors": null,
                  "owned": true,
                  "comment": null,
                  "details": {
                    "method": null,
                    "harmonizer": null,
                    "url": "https://portal.pedscommons.org/DD?view=table"
                  }
                }
              ],
              "vital_status": {
                "value": "Alive",
                "ancestors": null
              },
              "age_at_vital_status": {
                "value": 15,
                "ancestors": null
              },
              "depositions": [
                "db_gap"
              ]
            },
            "gateways": []
          }
        ]
      },
      "SubjectId": {
        "type": "object",
        "description": "Compound identifier composed of namespace and local name.",
        "properties": {
          "namespace": {
            "$ref": "#/components/schemas/Namespace"
          },
          "name": {
            "type": "string",
            "example": "TARGET-10-PAKKMW",
            "pattern": "^[A-Z0-9-]+$"
          }
        },
        "required": [
          "namespace",
          "name"
        ]
      },
      "Namespace": {
        "type": "object",
        "description": "Authority issuing the identifier (organization plus prefixed study name).",
        "properties": {
          "organization": {
            "type": "string",
            "example": "CCDI-DCC",
            "const": "CCDI-DCC"
          },
          "name": {
            "type": "string",
            "example": "dbGaP_phs000465",
            "pattern": "^dbGaP_phs[0-9]+$"
          }
        },
        "required": [
          "organization",
          "name"
        ]
      },
      "SubjectMetadata": {
        "type": "object",
        "description": "Harmonized and unharmonized attributes associated with the participant.",
        "properties": {
          "sex": {
            "$ref": "#/components/schemas/MetadataField"
          },
          "race": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetadataField"
            },
            "minItems": 0
          },
          "ethnicity": {
            "$ref": "#/components/schemas/MetadataField"
          },
          "identifiers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IdentifierField"
            },
            "minItems": 1
          },
          "associated_diagnoses": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AssociatedDiagnosisField"
            },
            "minItems": 0
          },
          "vital_status": {
            "$ref": "#/components/schemas/MetadataField"
          },
          "age_at_vital_status": {
            "$ref": "#/components/schemas/MetadataField"
          },
          "depositions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": [
              "db_gap"
            ]
          }
        },
        "required": [
          "sex",
          "race",
          "ethnicity",
          "identifiers",
          "associated_diagnoses",
          "vital_status",
          "age_at_vital_status",
          "depositions"
        ]
      },
      "MetadataField": {
        "type": "object",
        "description": "Scalar metadata value with optional ancestry/provenance.",
        "properties": {
          "value": {
            "type": "string",
            "minLength": 1
          },
          "ancestors": {
            "type": [
              "string",
              "null"
            ],
            "default": null
          }
        },
        "required": [
          "value",
          "ancestors"
        ]
      },
      "IdentifierField": {
        "type": "object",
        "description": "External identifier binding for the participant.",
        "properties": {
          "value": {
            "$ref": "#/components/schemas/IdentifierValue"
          },
          "ancestors": {
            "type": [
              "string",
              "null"
            ],
            "default": null
          }
        },
        "required": [
          "value",
          "ancestors"
        ]
      },
      "IdentifierValue": {
        "type": "object",
        "description": "Concrete identifier value including namespace and local name.",
        "properties": {
          "namespace": {
            "$ref": "#/components/schemas/Namespace"
          },
          "name": {
            "type": "string",
            "minLength": 1
          }
        },
        "required": [
          "namespace",
          "name"
        ]
      },
      "AssociatedDiagnosisField": {
        "type": "object",
        "description": "Diagnosis term assigned to the participant with optional metadata.",
        "properties": {
          "value": {
            "type": "string",
            "minLength": 1
          },
          "ancestors": {
            "type": [
              "string",
              "null"
            ],
            "default": null
          },
          "owned": {
            "type": "boolean",
            "default": true
          },
          "comment": {
            "type": [
              "string",
              "null"
            ],
            "default": null
          },
          "details": {
            "$ref": "#/components/schemas/DiagnosisDetails"
          }
        },
        "required": [
          "value",
          "ancestors",
          "owned",
          "comment",
          "details"
        ]
      },
      "DiagnosisDetails": {
        "type": "object",
        "description": "Additional details for a diagnosis value (optional metadata).",
        "properties": {
          "method": {
            "type": [
              "string",
              "null"
            ],
            "default": null
          },
          "harmonizer": {
            "type": [
              "string",
              "null"
            ],
            "default": null
          },
          "url": {
            "type": "string",
            "example": "https://portal.pedscommons.org/DD?view=table",
            "format": "uri"
          }
        },
        "required": [
          "method",
          "harmonizer",
          "url"
        ]
      },
      "SubjectResponse": {
        "type": "object",
        "description": "Envelope containing source metadata, result list, and pagination info.",
        "properties": {
          "summary": {
            "$ref": "#/components/schemas/Summary"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Subject"
            }
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationInfo"
          }
        }
      },
      "Summary": {
        "type": "object",
        "description": "Top-level counts related to the current result set and overall corpus.",
        "properties": {
          "counts": {
            "$ref": "#/components/schemas/Counts"
          }
        }
      },
      "Counts": {
        "type": "object",
        "description": "Count metrics: all = total unique participants; current = items returned in this page.",
        "properties": {
          "all": {
            "type": "integer",
            "example": 104496
          },
          "current": {
            "type": "integer",
            "example": 20
          }
        }
      },
      "PaginationInfo": {
        "type": "object",
        "description": "Pagination metadata for client navigation.",
        "properties": {
          "page": {
            "type": "integer",
            "example": 1
          },
          "per_page": {
            "type": "integer",
            "example": 20
          },
          "total_pages": {
            "type": "integer",
            "example": 5225
          },
          "total_items": {
            "type": "integer",
            "example": 104496
          },
          "has_next": {
            "type": "boolean",
            "example": true
          },
          "has_prev": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "SummaryCounts": {
        "type": "object",
        "description": "Summary counts structure.",
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total entity count"
          }
        },
        "required": [
          "total"
        ]
      },
      "SummaryResponse": {
        "type": "object",
        "description": "Summary-only response for endpoints that return aggregate counts.",
        "properties": {
          "counts": {
            "$ref": "#/components/schemas/SummaryCounts"
          }
        },
        "required": [
          "counts"
        ]
      },
      "CountResponse": {
        "type": "object",
        "description": "Response for field counting endpoints with total, missing, and value counts.",
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total counts of all unique participants matching filters",
            "example": 25696
          },
          "missing": {
            "type": "integer",
            "description": "Count of unique participants with null value in the field",
            "example": 1069
          },
          "values": {
            "type": "array",
            "description": "Count results for each distinct field value",
            "items": {
              "$ref": "#/components/schemas/CountResult"
            }
          }
        },
        "required": [
          "total",
          "missing",
          "values"
        ]
      },
      "CountResult": {
        "type": "object",
        "description": "Count result for a specific field value.",
        "properties": {
          "value": {
            "type": "string",
            "description": "The field value",
            "example": "M"
          },
          "count": {
            "type": "integer",
            "description": "Number of unique participants with this value",
            "example": 15234
          }
        },
        "required": [
          "value",
          "count"
        ]
      },
      "ErrorsResponse": {
        "type": "object",
        "description": "Error response envelope containing a list of errors.",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ErrorDetail"
            }
          }
        },
        "required": [
          "errors"
        ]
      },
      "ErrorDetail": {
        "type": "object",
        "description": "Individual error detail. Fields vary by error kind.",
        "properties": {
          "kind": {
            "type": "string",
            "description": "Error kind identifier",
            "enum": [
              "InvalidRoute",
              "InvalidParameters",
              "NotFound",
              "UnshareableData",
              "UnsupportedField"
            ],
            "example": "NotFound"
          },
          "method": {
            "type": "string",
            "description": "HTTP method (for InvalidRoute errors)",
            "example": "GET"
          },
          "route": {
            "type": "string",
            "description": "Invalid route path (for InvalidRoute errors)",
            "example": "/foobar"
          },
          "parameters": {
            "type": "array",
            "description": "List of invalid parameter names (for InvalidParameters errors)",
            "items": {
              "type": "string"
            },
            "example": [
              "id"
            ]
          },
          "reason": {
            "type": "string",
            "description": "Explanation for the error",
            "example": "The parameter was a non-integer value."
          },
          "entity": {
            "type": "string",
            "description": "Entity type or identifier (for NotFound/UnshareableData errors)",
            "example": "Samples"
          },
          "field": {
            "type": "string",
            "description": "Field name (for UnsupportedField errors)",
            "example": "field"
          }
        },
        "oneOf": [
          {
            "type": "object",
            "required": [
              "kind",
              "method",
              "route"
            ]
          },
          {
            "type": "object",
            "required": [
              "kind",
              "parameters",
              "reason"
            ]
          },
          {
            "type": "object",
            "required": [
              "kind",
              "entity"
            ]
          },
          {
            "type": "object",
            "required": [
              "kind",
              "entity",
              "reason"
            ]
          },
          {
            "type": "object",
            "required": [
              "kind",
              "field",
              "reason"
            ]
          }
        ]
      },
      "Error": {
        "type": "object",
        "description": "Standard error envelope (legacy - use ErrorsResponse).",
        "properties": {
          "detail": {
            "type": "string",
            "example": "Subject not found"
          }
        }
      }
    }
  }
}