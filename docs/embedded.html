<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1"
  />
  <title>CCDI Federation Service API Documentation</title>

  <!-- Swagger UI CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui.css"
  />

  <!-- Optional: prevent favicon 404 noise -->
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />

  <style>
    html {
      box-sizing: border-box;
      overflow-y: scroll;
    }
    *, *::before, *::after { box-sizing: inherit; }
    body { margin: 0; background: #fafafa; }
    .swagger-ui .topbar { background-color: #2c3e50; }

    .custom-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      padding: 2rem;
      text-align: center;
      margin-bottom: 2rem;
    }
    .custom-header h1 {
      margin: 0;
      font-size: 2.5rem;
      font-weight: 300;
    }
    .custom-header p {
      margin: 0.5rem 0 0 0;
      font-size: 1.2rem;
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div class="custom-header">
    <h1>CCDI Federation Service API</h1>
    <p>REST API for querying the CCDI-DCC graph database</p>
  </div>

  <div id="swagger-ui"></div>

  <!-- Swagger UI JS (deferred so DOM is ready) -->
  <script defer src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-bundle.js"></script>
  <script defer src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-standalone-preset.js"></script>

  <script>
    // Inline OpenAPI document (used if no ?url= is provided)
    const embeddedSpec = {
      "openapi": "3.1.0",
      "info": {
            "title": "CCDI Federation Service API",
            "description": "REST API for querying CCDI-DCC  graph database",
            "version": "1.0.0",
            "summary": "Childhood Cancer Data Initiative Federation Service",
            "contact": {
                  "name": "CCDI Development Team",
                  "email": "support@ccdi.org",
                  "url": "https://github.com/CBIIT/ccdi-dcc-federation-service"
            },
            "license": {
                  "name": "MIT",
                  "url": "https://opensource.org/licenses/MIT"
            }
      },
      "servers": [
            {
                  "url": "https://dcc-dev.ccdi.cancer.gov/api/v1",
                  "description": "Dev Test server (default)"
            },
            {
                  "url": "http://localhost:8000/api/v1",
                  "description": "Local development server"
            }
      ],
      "paths": {
            "/subject": {
                  "get": {
                        "tags": [
                              "Subject"
                        ],
                        "summary": "Gets the subjects known by this server.",
                        "description": "Gets the subjects known by this server.\n\n### Pagination\n\nThis endpoint is paginated. Users may override the default pagination\nparameters by providing one or more of the pagination-related query\nparameters below.\n\n### Filtering\n\nAll harmonized (top-level) and unharmonized (nested under the\n`metadata.unharmonized` key) metadata fields are filterable. To achieve\nthis, you can provide the field name as a [`String`]. Filtering follows the\nfollowing rules:\n\n* For single-value metadata field, the subject is included in the results if\nits value _exactly_ matches the query string. Matches are case-sensitive.\n* For multiple-value metadata fields, the subject is included in the results\nif any of its values for the field _exactly_ match the query string (a\nlogical OR (`||`)). Matches are case-sensitive.\n* When the metadata field is `null` (in the case of singular or\nmultiple-valued metadata fields) or empty, the subject is not included.\n* When multiple fields are provided as filters, a logical AND (`&&`) strings\ntogether the predicates. In other words, all filters must match for a\nsubject to be returned. Note that this means that servers do not natively\nsupport logical OR (`||`) across multiple fields: that must be done by\ncalling this endpoint with each of your desired queries and performing a\nset union of those subjects out of band.\n\n### Ordering\n\nThis endpoint has default ordering requirementsâ€”those details are documented\nin the `SubjectResponse` schema.",
                        "operationId": "subject_index",
                        "parameters": [
                              {
                                    "name": "sex",
                                    "in": "query",
                                    "description": "Matches any subject where the `sex` field matches the string provided.",
                                    "required": false,
                                    "schema": {
                                          "type": "string",
                                          "enum": [
                                                "F",
                                                "M",
                                                "U"
                                          ]
                                    }
                              },
                              {
                                    "name": "race",
                                    "in": "query",
                                    "description": "Matches any subject where any member of the `race` field matches any\nof the provided values. Multiple race values can be provided separated\nby `||` (double pipe) as delimiter. The race field in the database may\ncontain semicolon-separated values (e.g., 'Asian;White'), and the filter\nwill match if any of the provided values is found within those values.\n\n**Delimiter:** Only `||` (double pipe) is accepted as a delimiter for\nmultiple values. All other characters (comma, ampersand, etc.) are treated\nas part of a single race value and will fail validation.\n\n**Valid race values:**\n- Not allowed to collect\n- Native Hawaiian or other Pacific Islander\n- Not Reported\n- Unknown\n- American Indian or Alaska Native\n- Asian\n- Black or African American\n- White\n\n**Examples:**\n- Single value: `?race=White`\n- Multiple values: `?race=White||Black%20or%20African%20American`\n- Invalid (comma): `?race=White,Black` - treated as single invalid value",
                                    "required": false,
                                    "schema": {
                                          "type": "string"
                                    }
                              },
                              {
                                    "name": "ethnicity",
                                    "in": "query",
                                    "description": "Matches any subject where the `ethnicity` field matches the string\nprovided. Ethnicity is derived from race values: if race contains\n\"Hispanic or Latino\", ethnicity is \"Hispanic or Latino\"; otherwise\n\"Not reported\". Only these two values are accepted.",
                                    "required": false,
                                    "schema": {
                                          "type": "string",
                                          "enum": [
                                                "Hispanic or Latino",
                                                "Not reported"
                                          ]
                                    }
                              },
                              {
                                    "name": "identifiers",
                                    "in": "query",
                                    "description": "Matches any subject where any member of the `identifiers` field matches\nthe string provided.\n\n**Note:** a logical OR (`||`) is performed across the values when\ndetermining whether the subject should be included in the results.",
                                    "required": false,
                                    "schema": {
                                          "type": "string"
                                    }
                              },
                              {
                                    "name": "vital_status",
                                    "in": "query",
                                    "description": "Matches any subject where the `vital_status` field matches the string\nprovided. Valid values are: Alive, Dead, Not Reported, Unknown.",
                                    "required": false,
                                    "schema": {
                                          "type": "string",
                                          "enum": [
                                                "Alive",
                                                "Dead",
                                                "Not Reported",
                                                "Unknown"
                                          ]
                                    }
                              },
                              {
                                    "name": "age_at_vital_status",
                                    "in": "query",
                                    "description": "Matches any subject where the `age_at_vital_status` field matches the\ninteger value provided. The age is stored in days.\nMust be a valid non-negative integer.",
                                    "required": false,
                                    "schema": {
                                          "type": "integer",
                                          "minimum": 0
                                    }
                              },
                              {
                                    "name": "depositions",
                                    "in": "query",
                                    "description": "Filter by study_id. Matches any subject where the `depositions` field contains \nthe specified study_id value (e.g., `phs002431`). Returns all participants that \nbelong to the specified study.\n\nExample: `depositions=phs002431` will return all participants in study `phs002431`.",
                                    "required": false,
                                    "schema": {
                                          "type": "string",
                                          "example": "phs002431"
                                    }
                              },
                              {
                                    "name": "page",
                                    "in": "query",
                                    "description": "The page to retrieve.\n\nThis is a 1-based index of a page within a page set. The value of `page`\n**must** default to `1` when this parameter is not provided.",
                                    "required": false,
                                    "schema": {
                                          "type": "integer",
                                          "default": 1,
                                          "minimum": 1
                                    }
                              },
                              {
                                    "name": "per_page",
                                    "in": "query",
                                    "description": "The number of results per page.\n\nEach server can select its own default value for `per_page` when this\nparameter is not provided. That said, the convention within the\ncommunity is to use `100` as a default value if any value is equally\nreasonable. This server uses `20` as the default value.",
                                    "required": false,
                                    "schema": {
                                          "type": "integer",
                                          "default": 20,
                                          "minimum": 1,
                                          "maximum": 100
                                    }
                              }
                        ],
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "headers": {
                                          "link": {
                                                "schema": {
                                                      "type": "string"
                                                },
                                                "description": "Links to URLs that may be of interest when paging through paginated responses. This header contains two or more links of interest. The format of the field is as follows:\n\n`Link: <URL>; rel=\"REL\"`\n\n### Relationships\n\nIn the format above, `URL` represents a valid URL for the link of interest and `REL` is one of four values:\n- `first` (_Required_). A link to the first page in the results (can be the same as `last` if there is only one page).\n- `last` (_Required_). A link to the last page in the results (can be the same as `first` if there is only one page).\n- `next` (_Optional_). A link to the next page (if it exists).\n- `prev` (_Optional_). A link to the previous page (if it exists).\n\n### Requirements\n\n- This header _must_ provide links for at least the `first` and `last` rels.\n- The `prev` and `next` links must exist only (a) when there are multiple pages in the result page set and (b) when the current page is not the first or last page, respectively.\n- This list of links is unordered.\n\n### Notes\n\n- HTTP 1.1 and HTTP 2.0 dictate that response headers are case insensitive. Though not required, we recommend an all lowercase name of `link` for this response header."
                                          }
                                    },
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/SubjectResponse"
                                                },
                                                "example": {
                                                      "summary": {
                                                            "counts": {
                                                                  "all": 25696,
                                                                  "current": 20
                                                            }
                                                      },
                                                      "data": [
                                                            {
                                                                  "id": {
                                                                        "namespace": {
                                                                              "organization": "CCDI-DCC",
                                                                              "name": "phs"
                                                                        },
                                                                        "name": "TARGET-10-PAKKMW"
                                                                  },
                                                                  "kind": "Participant",
                                                                  "metadata": {
                                                                        "sex": {
                                                                              "value": "F"
                                                                        },
                                                                        "race": [
                                                                              {
                                                                                    "value": "White"
                                                                              }
                                                                        ],
                                                                        "ethnicity": {
                                                                              "value": "Not reported"
                                                                        },
                                                                        "identifiers": [
                                                                              {
                                                                                    "value": {
                                                                                          "namespace": {
                                                                                                "organization": "CCDI-DCC",
                                                                                                "name": "phs"
                                                                                          },
                                                                                          "name": "TARGET-10-PAKKMW",
                                                                                          "type": "Linked"
                                                                                    }
                                                                              }
                                                                        ],
                                                                        "associated_diagnoses": [
                                                                              {
                                                                                    "value": "Acute Lymphoblastic Leukemia, NOS",
                                                                                    "owned": true,
                                                                                    "comment": null,
                                                                                    "details": {
                                                                                          "method": null,
                                                                                          "harmonizer": null,
                                                                                          "url": "https://portal.pedscommons.org/DD?view=table"
                                                                                    }
                                                                              }
                                                                        ],
                                                                        "vital_status": {
                                                                              "value": "Alive"
                                                                        },
                                                                        "age_at_vital_status": {
                                                                              "value": 5475
                                                                        },
                                                                        "depositions": [
                                                                              {
                                                                                    "kind": "dbGaP",
                                                                                    "value": "phs002431"
                                                                              },
                                                                              {
                                                                                    "kind": "dbGaP",
                                                                                    "value": "phs000463"
                                                                              }
                                                                        ]
                                                                  },
                                                                  "gateways": []
                                                            }
                                                      ],
                                                      "pagination": {
                                                            "page": 1,
                                                            "per_page": 20,
                                                            "total_pages": 1285,
                                                            "total_items": 25696,
                                                            "has_next": true,
                                                            "has_prev": false
                                                      }
                                                }
                                          }
                                    }
                              },
                              "404": {
                                    "description": "Not found.\nServers that cannot provide line-level data should use this response rather than Forbidden (403), as there is no level of authorization that would allow one to access the information included in the API.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                },
                                                "example": {
                                                      "errors": [
                                                            {
                                                                  "kind": "UnshareableData",
                                                                  "entity": "Subjects",
                                                                  "message": "Our agreement with data providers prohibits us from sharing line-level data."
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              },
                              "400": {
                                    "description": "Invalid query or path parameters.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                },
                                                "example": {
                                                      "errors": [
                                                            {
                                                                  "kind": "InvalidParameters",
                                                                  "parameters": [
                                                                        "page",
                                                                        "per_page"
                                                                  ],
                                                                  "message": "Invalid value for parameters 'page' and 'per_page': unable to calculate offset."
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/subject/by/{field}/count": {
                  "get": {
                        "tags": [
                              "Subject"
                        ],
                        "summary": "Groups the subjects by the specified metadata field and returns counts.",
                        "description": "Groups the subjects by the specified metadata field and returns counts.",
                        "operationId": "subjects_by_count",
                        "parameters": [
                              {
                                    "name": "field",
                                    "in": "path",
                                    "description": "The field to group by and count with.",
                                    "required": true,
                                    "schema": {
                                          "type": "string",
                                          "enum": [
                                                "sex",
                                                "race",
                                                "ethnicity",
                                                "vital_status",
                                                "age_at_vital_status",
                                                "associated_diagnoses"
                                          ]
                                    },
                                    "examples": {
                                          "sex": {
                                                "value": "sex",
                                                "summary": "Count by sex"
                                          },
                                          "race": {
                                                "value": "race",
                                                "summary": "Count by race"
                                          },
                                          "ethnicity": {
                                                "value": "ethnicity",
                                                "summary": "Count by ethnicity"
                                          },
                                          "vital_status": {
                                                "value": "vital_status",
                                                "summary": "Count by vital status"
                                          },
                                          "age_at_vital_status": {
                                                "value": "age_at_vital_status",
                                                "summary": "Count by age at vital status"
                                          },
                                          "associated_diagnoses": {
                                                "value": "associated_diagnoses",
                                                "summary": "Count by associated diagnoses"
                                          }
                                    }
                              }
                        ],
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/CountResponse"
                                                }
                                          }
                                    }
                              },
                              "400": {
                                    "description": "Unsupported field.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                },
                                                "example": {
                                                      "errors": [
                                                            {
                                                                  "kind": "UnsupportedField",
                                                                  "field": "wrong field",
                                                                  "message": "Field is not supported for subjects.",
                                                                  "reason": "This field is not present for subjects."
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/subject/summary": {
                  "get": {
                        "tags": [
                              "Subject"
                        ],
                        "summary": "Reports summary information for the subjects known by this server.",
                        "description": "Reports summary information for the subjects known by this server.",
                        "operationId": "subject_summary",
                        "responses": {
                              "200": {
                                    "description": "Summary counts successfully returned",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/SummaryResponse"
                                                },
                                                "example": {
                                                      "counts": {
                                                            "total": 25696
                                                      }
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/subject/{organization}/{namespace}/{name}": {
                  "get": {
                        "tags": [
                              "Subject"
                        ],
                        "summary": "Gets the subject matching the provided id (if the subject exists).",
                        "description": "Gets the subject matching the provided id (if the subject exists).",
                        "operationId": "subject_show",
                        "parameters": [
                              {
                                    "name": "organization",
                                    "in": "path",
                                    "description": "The organization identifier of the namespace to which the subject belongs. Defaults to 'CCDI-DCC'.",
                                    "required": true,
                                    "schema": {
                                          "type": "string",
                                          "example": "CCDI-DCC",
                                          "default": "CCDI-DCC"
                                    }
                              },
                              {
                                    "name": "namespace",
                                    "in": "path",
                                    "description": "The namespace identifier (study_id value) to which the subject belongs. This is the value of the study_id field from the database.",
                                    "required": true,
                                    "schema": {
                                          "type": "string",
                                          "example": "phs000465"
                                    }
                              },
                              {
                                    "name": "name",
                                    "in": "path",
                                    "description": "The name portion of the subject identifier (participant ID).",
                                    "required": true,
                                    "schema": {
                                          "type": "string",
                                          "example": "TARGET-10-PAKKMW"
                                    }
                              }
                        ],
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "oneOf": [
                                                            {
                                                                  "$ref": "#/components/schemas/Subject"
                                                            },
                                                            {
                                                                  "$ref": "#/components/schemas/SubjectResponse"
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              },
                              "404": {
                                    "description": "Not found.\nServers that cannot provide line-level data should use this response rather than Forbidden (403), as there is no level of authorization that would allow one to access the information included in the API.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                },
                                                "example": {
                                                      "errors": [
                                                            {
                                                                  "kind": "NotFound",
                                                                  "entity": "Subjects",
                                                                  "message": "Unable to find data for your request.",
                                                                  "reason": "No data found."
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/metadata/fields/{field_type}": {
                  "get": {
                        "tags": [
                              "Metadata"
                        ],
                        "summary": "Get metadata fields",
                        "description": "Get metadata fields for the specified entity type (subjects, samples, or file). Returns empty array if field_type doesn't match.",
                        "operationId": "metadata_fields",
                        "parameters": [
                              {
                                    "name": "field_type",
                                    "in": "path",
                                    "description": "Entity type: subjects, samples, or file",
                                    "required": true,
                                    "schema": {
                                          "type": "string"
                                    },
                                    "examples": {
                                          "subjects": {
                                                "value": "subjects",
                                                "summary": "Get subject metadata fields"
                                          },
                                          "samples": {
                                                "value": "samples",
                                                "summary": "Get sample metadata fields"
                                          },
                                          "file": {
                                                "value": "file",
                                                "summary": "Get file metadata fields"
                                          }
                                    }
                              }
                        ],
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/MetadataFieldsInfoResponse"
                                                },
                                                "example": {
                                                      "fields": [
                                                            {
                                                                  "path": "sex",
                                                                  "harmonized": true,
                                                                  "wiki_url": "https://github.com/CBIIT/ccdi-federation-api/wiki/Subject-Metadata-Fields#sex",
                                                                  "standard": {
                                                                        "url": "https://cadsr.cancer.gov/onedata/dmdirect/NIH/NCI/CO/CDEDD?filter=CDEDD.ITEM_ID=6343385%20and%20ver_nr=1",
                                                                        "name": "caDSR CDE 6343385 v1.00"
                                                                  }
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/": {
                  "servers": [
                        {
                              "url": "https://dcc-dev.ccdi.cancer.gov",
                              "description": "Dev Test server (default)"
                        },
                        {
                              "url": "http://localhost:8000",
                              "description": "Local development server"
                        }
                  ],
                  "get": {
                        "tags": [
                              "Convenience"
                        ],
                        "summary": "API root JSON",
                        "description": "Returns the API root JSON configuration with available endpoints and API metadata.",
                        "operationId": "api_root",
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "type": "object",
                                                      "properties": {
                                                            "title": {
                                                                  "type": "string",
                                                                  "example": "CCDI DCC Federation API Server"
                                                            },
                                                            "version": {
                                                                  "type": "string",
                                                                  "example": "v1.2.0"
                                                            },
                                                            "description": {
                                                                  "type": "string",
                                                                  "example": "CCDI DCC Federation API Implementation"
                                                            },
                                                            "endpoints": {
                                                                  "type": "object",
                                                                  "description": "Available API endpoints"
                                                            }
                                                      }
                                                }
                                          }
                                    }
                              },
                              "404": {
                                    "description": "Root not found.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                },
                                                "example": {
                                                      "errors": [
                                                            {
                                                                  "kind": "NotFound",
                                                                  "entity": "Root",
                                                                  "message": "Unable to find data for your request.",
                                                                  "reason": "No data found."
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/version": {
                  "servers": [
                        {
                              "url": "https://dcc-dev.ccdi.cancer.gov",
                              "description": "Dev Test server (default)"
                        },
                        {
                              "url": "http://localhost:8000",
                              "description": "Local development server"
                        }
                  ],
                  "get": {
                        "tags": [
                              "Convenience"
                        ],
                        "summary": "Get API version",
                        "description": "Returns the current API version.",
                        "operationId": "get_version",
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "type": "object",
                                                      "properties": {
                                                            "version": {
                                                                  "type": "string",
                                                                  "example": "v1.2.0"
                                                            }
                                                      },
                                                      "required": [
                                                            "version"
                                                      ]
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/errors/examples": {
                  "get": {
                        "summary": "Error response examples",
                        "description": "This endpoint provides example error responses for different error types.\nThis is a reference endpoint showing the structure of error responses\nthat may be returned by other endpoints.\n\n**Error Types:**\n- `InvalidRoute`: Returned when requesting a non-existent route\n- `InvalidParameters`: Returned when request parameters are invalid\n- `NotFound`: Returned when a requested resource is not found\n- `UnshareableData`: Returned when data cannot be shared due to agreements\n- `UnsupportedField`: Returned when a field is not supported for operations\n\nFor 400 or 404 errors, always use a customized response to avoid exposing\nany internal error messages or user inputs. Any error not covered by the\ncategories below should return a 404 NotFound error.\n",
                        "tags": [
                              "Errors"
                        ],
                        "parameters": [
                              {
                                    "name": "error_type",
                                    "in": "query",
                                    "description": "Type of error example to return",
                                    "required": false,
                                    "schema": {
                                          "type": "string",
                                          "enum": [
                                                "InvalidRoute",
                                                "InvalidParameters",
                                                "NotFound",
                                                "UnshareableData",
                                                "UnsupportedField",
                                                "all"
                                          ],
                                          "default": "all"
                                    },
                                    "examples": {
                                          "InvalidRoute": {
                                                "value": "InvalidRoute",
                                                "summary": "Invalid route error example"
                                          },
                                          "InvalidParameters": {
                                                "value": "InvalidParameters",
                                                "summary": "Invalid parameters error example"
                                          },
                                          "NotFound": {
                                                "value": "NotFound",
                                                "summary": "Not found error example"
                                          },
                                          "UnshareableData": {
                                                "value": "UnshareableData",
                                                "summary": "Unshareable data error example"
                                          },
                                          "UnsupportedField": {
                                                "value": "UnsupportedField",
                                                "summary": "Unsupported field error example"
                                          },
                                          "all": {
                                                "value": "all",
                                                "summary": "All error examples"
                                          }
                                    }
                              }
                        ],
                        "responses": {
                              "200": {
                                    "description": "Error examples successfully returned",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                },
                                                "examples": {
                                                      "allErrors": {
                                                            "summary": "All error examples",
                                                            "value": {
                                                                  "errors": [
                                                                        {
                                                                              "kind": "InvalidRoute",
                                                                              "method": "GET",
                                                                              "message": "Invalid route requested."
                                                                        },
                                                                        {
                                                                              "kind": "InvalidParameters",
                                                                              "parameters": [],
                                                                              "message": "Invalid query parameter(s) provided.",
                                                                              "reason": "Unknown query parameter(s)"
                                                                        },
                                                                        {
                                                                              "kind": "NotFound",
                                                                              "entity": "Samples",
                                                                              "message": "Unable to find data for your request.",
                                                                              "reason": "No data found."
                                                                        },
                                                                        {
                                                                              "kind": "UnshareableData",
                                                                              "entity": "Sample",
                                                                              "message": "Our agreement with data providers prohibits us from sharing line-level data.",
                                                                              "reason": "Data sharing is restricted by agreement with data providers."
                                                                        },
                                                                        {
                                                                              "kind": "UnsupportedField",
                                                                              "field": "wrong field",
                                                                              "message": "Field is not supported for subjects.",
                                                                              "reason": "This field is not present for subjects."
                                                                        }
                                                                  ]
                                                            }
                                                      },
                                                      "invalidRoute": {
                                                            "summary": "Invalid route error",
                                                            "value": {
                                                                  "errors": [
                                                                        {
                                                                              "kind": "InvalidRoute",
                                                                              "method": "GET",
                                                                              "message": "Invalid route requested."
                                                                        }
                                                                  ]
                                                            }
                                                      },
                                                      "invalidParameters": {
                                                            "summary": "Invalid parameters error",
                                                            "value": {
                                                                  "errors": [
                                                                        {
                                                                              "kind": "InvalidParameters",
                                                                              "parameters": [],
                                                                              "message": "Invalid query parameter(s) provided.",
                                                                              "reason": "Unknown query parameter(s)"
                                                                        }
                                                                  ]
                                                            }
                                                      },
                                                      "notFound": {
                                                            "summary": "Not found error",
                                                            "value": {
                                                                  "errors": [
                                                                        {
                                                                              "kind": "NotFound",
                                                                              "entity": "Samples",
                                                                              "message": "Unable to find data for your request.",
                                                                              "reason": "No data found."
                                                                        }
                                                                  ]
                                                            }
                                                      },
                                                      "unshareableData": {
                                                            "summary": "Unshareable data error",
                                                            "value": {
                                                                  "errors": [
                                                                        {
                                                                              "kind": "UnshareableData",
                                                                              "entity": "Sample",
                                                                              "message": "Our agreement with data providers prohibits us from sharing line-level data.",
                                                                              "reason": "Data sharing is restricted by agreement with data providers."
                                                                        }
                                                                  ]
                                                            }
                                                      },
                                                      "unsupportedField": {
                                                            "summary": "Unsupported field error",
                                                            "value": {
                                                                  "errors": [
                                                                        {
                                                                              "kind": "UnsupportedField",
                                                                              "field": "wrong field",
                                                                              "message": "Field is not supported for subjects.",
                                                                              "reason": "This field is not present for subjects."
                                                                        }
                                                                  ]
                                                            }
                                                      }
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/namespace": {
                  "get": {
                        "tags": [
                              "Namespace"
                        ],
                        "summary": "Gets the namespaces known by this server.",
                        "description": "Gets the namespaces known by this server.",
                        "operationId": "namespace_index",
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "type": "array",
                                                      "items": {
                                                            "$ref": "#/components/schemas/NamespaceEntity"
                                                      }
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/namespace/{organization}/{namespace}": {
                  "get": {
                        "tags": [
                              "Namespace"
                        ],
                        "summary": "Gets the namespace matching the provided name (if it exists).",
                        "description": "Gets the namespace matching the provided name (if it exists).",
                        "operationId": "namespace_show",
                        "parameters": [
                              {
                                    "name": "organization",
                                    "in": "path",
                                    "description": "The organization of the namespace.",
                                    "required": true,
                                    "schema": {
                                          "type": "string"
                                    }
                              },
                              {
                                    "name": "namespace",
                                    "in": "path",
                                    "description": "The name of the namespace.",
                                    "required": true,
                                    "schema": {
                                          "type": "string"
                                    }
                              }
                        ],
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/NamespaceEntity"
                                                }
                                          }
                                    }
                              },
                              "404": {
                                    "description": "Namespace not found.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                },
                                                "example": {
                                                      "errors": [
                                                            {
                                                                  "kind": "NotFound",
                                                                  "entity": "Namespaces",
                                                                  "message": "Unable to find data for your request.",
                                                                  "reason": "No data found."
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/organization": {
                  "get": {
                        "tags": [
                              "Organization"
                        ],
                        "summary": "Gets the organizations known by this server.",
                        "description": "Gets the organizations known by this server.",
                        "operationId": "organization_index",
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "type": "array",
                                                      "items": {
                                                            "$ref": "#/components/schemas/OrganizationEntity"
                                                      }
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/organization/{name}": {
                  "get": {
                        "tags": [
                              "Organization"
                        ],
                        "summary": "Gets the organization matching the provided name (if it exists).",
                        "description": "Gets the organization matching the provided name (if it exists).",
                        "operationId": "organization_show",
                        "parameters": [
                              {
                                    "name": "name",
                                    "in": "path",
                                    "description": "The name of the organization.",
                                    "required": true,
                                    "schema": {
                                          "type": "string"
                                    }
                              }
                        ],
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/OrganizationEntity"
                                                }
                                          }
                                    }
                              },
                              "404": {
                                    "description": "Organization not found.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                },
                                                "example": {
                                                      "errors": [
                                                            {
                                                                  "kind": "NotFound",
                                                                  "entity": "Organization",
                                                                  "message": "Unable to find data for your request.",
                                                                  "reason": "No data found."
                                                            }
                                                      ]
                                                }
                                          }
                                    }
                              }
                        }
                  }
            },
            "/info": {
                  "get": {
                        "tags": [
                              "Info"
                        ],
                        "summary": "API info",
                        "description": "Returns the API information including server, API, and data details.",
                        "operationId": "api_info",
                        "responses": {
                              "200": {
                                    "description": "Successful operation.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/InfoResponse"
                                                },
                                                "example": {
                                                      "server": {
                                                            "name": "CCDI-DCC",
                                                            "version": "v1.0",
                                                            "owner": "Childhood Cancer Data Initiative Data Coordinating Center",
                                                            "contact_email": "NCIChildhoodCancerDataInitiative@mail.nih.gov"
                                                      },
                                                      "api": {
                                                            "api_version": "v1.2.0",
                                                            "documentation_url": "https://cbiit.github.io/ccdi-federation-api/"
                                                      },
                                                      "data": {
                                                            "version": {
                                                                  "version": "3.1.0",
                                                                  "about_url": "https://cbiit.github.io/crdc-data-model-navigator/?config=https://raw.githubusercontent.com/CBIIT/ccdi-dcc-model/refs/heads/main/"
                                                            },
                                                            "last_updated": "September 12, 2025",
                                                            "wiki_url": "https://github.com/CBIIT/ccdi-federation-api-spec/wiki",
                                                            "documentation_url": "https://cbiit.github.io/ccdi-dcc-federation-service/docs/index.html"
                                                      }
                                                }
                                          }
                                    }
                              },
                              "500": {
                                    "description": "Internal server error.",
                                    "content": {
                                          "application/json": {
                                                "schema": {
                                                      "$ref": "#/components/schemas/ErrorsResponse"
                                                }
                                          }
                                    }
                              }
                        }
                  }
            }
      },
      "components": {
            "schemas": {
                  "Subject": {
                        "type": "object",
                        "description": "Normalized participant entity returned by this service.",
                        "properties": {
                              "id": {
                                    "$ref": "#/components/schemas/SubjectId"
                              },
                              "kind": {
                                    "type": "string",
                                    "example": "Participant",
                                    "const": "Participant"
                              },
                              "metadata": {
                                    "$ref": "#/components/schemas/SubjectMetadata"
                              },
                              "gateways": {
                                    "type": "array",
                                    "items": {
                                          "type": "string"
                                    },
                                    "default": []
                              }
                        },
                        "required": [
                              "id",
                              "kind",
                              "metadata",
                              "gateways"
                        ],
                        "examples": [
                              {
                                    "id": {
                                          "namespace": {
                                                "organization": "CCDI-DCC",
                                                "name": "phs"
                                          },
                                          "name": "TARGET-10-PAKKMW"
                                    },
                                    "kind": "Participant",
                                    "metadata": {
                                          "sex": {
                                                "value": "F"
                                          },
                                          "race": [
                                                {
                                                      "value": "White"
                                                }
                                          ],
                                          "ethnicity": {
                                                "value": "Not reported"
                                          },
                                          "identifiers": [
                                                {
                                                      "value": {
                                                            "namespace": {
                                                                  "organization": "CCDI-DCC",
                                                                  "name": "phs"
                                                            },
                                                            "name": "TARGET-10-PAKKMW",
                                                            "type": "Linked"
                                                      }
                                                }
                                          ],
                                          "associated_diagnoses": [
                                                {
                                                      "value": "Acute Lymphoblastic Leukemia, NOS",
                                                      "owned": true,
                                                      "comment": null,
                                                      "details": {
                                                            "method": null,
                                                            "harmonizer": null,
                                                            "url": "https://portal.pedscommons.org/DD?view=table"
                                                      }
                                                }
                                          ],
                                          "vital_status": {
                                                "value": "Alive"
                                          },
                                          "age_at_vital_status": {
                                                "value": 5475
                                          },
                                          "depositions": [
                                                {
                                                      "kind": "dbGaP",
                                                      "value": "phs002431"
                                                },
                                                {
                                                      "kind": "dbGaP",
                                                      "value": "phs000463"
                                                }
                                          ]
                                    },
                                    "gateways": []
                              }
                        ]
                  },
                  "SubjectId": {
                        "type": "object",
                        "description": "Compound identifier composed of namespace and local name.",
                        "properties": {
                              "namespace": {
                                    "$ref": "#/components/schemas/Namespace"
                              },
                              "name": {
                                    "type": "string",
                                    "example": "TARGET-10-PAKKMW",
                                    "pattern": "^[A-Z0-9-]+$"
                              }
                        },
                        "required": [
                              "namespace",
                              "name"
                        ]
                  },
                  "Namespace": {
                        "type": "object",
                        "description": "Authority issuing the identifier (organization plus prefixed study name).",
                        "properties": {
                              "organization": {
                                    "type": "string",
                                    "example": "CCDI-DCC",
                                    "const": "CCDI-DCC"
                              },
                              "name": {
                                    "type": "string",
                                    "example": "phs",
                                    "pattern": "^phs$"
                              }
                        },
                        "required": [
                              "organization",
                              "name"
                        ]
                  },
                  "SubjectMetadata": {
                        "type": "object",
                        "description": "Harmonized and unharmonized attributes associated with the participant.",
                        "properties": {
                              "sex": {
                                    "$ref": "#/components/schemas/MetadataField"
                              },
                              "race": {
                                    "type": "array",
                                    "items": {
                                          "$ref": "#/components/schemas/MetadataField"
                                    },
                                    "minItems": 0
                              },
                              "ethnicity": {
                                    "$ref": "#/components/schemas/MetadataField"
                              },
                              "identifiers": {
                                    "type": "array",
                                    "items": {
                                          "$ref": "#/components/schemas/IdentifierField"
                                    },
                                    "minItems": 1
                              },
                              "associated_diagnoses": {
                                    "type": "array",
                                    "items": {
                                          "$ref": "#/components/schemas/AssociatedDiagnosisField"
                                    },
                                    "minItems": 0
                              },
                              "vital_status": {
                                    "$ref": "#/components/schemas/MetadataField"
                              },
                              "age_at_vital_status": {
                                    "$ref": "#/components/schemas/MetadataField"
                              },
                              "depositions": {
                                    "type": "array",
                                    "items": {
                                          "type": "object",
                                          "properties": {
                                                "kind": {
                                                      "type": "string",
                                                      "example": "dbGaP"
                                                },
                                                "value": {
                                                      "type": "string",
                                                      "example": "phs002431"
                                                }
                                          }
                                    },
                                    "description": "Array of deposition objects containing study_id values",
                                    "example": [
                                          {
                                                "kind": "dbGaP",
                                                "value": "phs002431"
                                          },
                                          {
                                                "kind": "dbGaP",
                                                "value": "phs000463"
                                          }
                                    ]
                              }
                        },
                        "required": [
                              "sex",
                              "race",
                              "ethnicity",
                              "identifiers",
                              "associated_diagnoses",
                              "vital_status",
                              "age_at_vital_status",
                              "depositions"
                        ]
                  },
                  "MetadataField": {
                        "type": "object",
                        "description": "Scalar metadata value with optional ancestry/provenance.",
                        "properties": {
                              "value": {
                                    "type": "string",
                                    "minLength": 1
                              },
                              "ancestors": {
                                    "type": [
                                          "string",
                                          "null"
                                    ],
                                    "default": null
                              }
                        },
                        "required": [
                              "value",
                              "ancestors"
                        ]
                  },
                  "IdentifierField": {
                        "type": "object",
                        "description": "External identifier binding for the participant.",
                        "properties": {
                              "value": {
                                    "$ref": "#/components/schemas/IdentifierValue"
                              },
                              "ancestors": {
                                    "type": [
                                          "string",
                                          "null"
                                    ],
                                    "default": null
                              }
                        },
                        "required": [
                              "value",
                              "ancestors"
                        ]
                  },
                  "IdentifierValue": {
                        "type": "object",
                        "description": "Concrete identifier value including namespace and local name.",
                        "properties": {
                              "namespace": {
                                    "$ref": "#/components/schemas/Namespace"
                              },
                              "name": {
                                    "type": "string",
                                    "minLength": 1
                              },
                              "type": {
                                    "type": "string",
                                    "description": "Identifier type",
                                    "default": "Linked",
                                    "example": "Linked"
                              },
                              "server": {
                                    "type": "string",
                                    "description": "Server URL",
                                    "nullable": true,
                                    "example": "https://example.com/api/v1/subject/CCDI-DCC/phs002431/SUBJ-001"
                              }
                        },
                        "required": [
                              "namespace",
                              "name"
                        ]
                  },
                  "AssociatedDiagnosisField": {
                        "type": "object",
                        "description": "Diagnosis term assigned to the participant with optional metadata.",
                        "properties": {
                              "value": {
                                    "type": "string",
                                    "minLength": 1
                              },
                              "ancestors": {
                                    "type": [
                                          "string",
                                          "null"
                                    ],
                                    "default": null
                              },
                              "owned": {
                                    "type": "boolean",
                                    "default": true
                              },
                              "comment": {
                                    "type": [
                                          "string",
                                          "null"
                                    ],
                                    "default": null
                              },
                              "details": {
                                    "$ref": "#/components/schemas/DiagnosisDetails"
                              }
                        },
                        "required": [
                              "value",
                              "ancestors",
                              "owned",
                              "comment",
                              "details"
                        ]
                  },
                  "DiagnosisDetails": {
                        "type": "object",
                        "description": "Additional details for a diagnosis value (optional metadata).",
                        "properties": {
                              "method": {
                                    "type": [
                                          "string",
                                          "null"
                                    ],
                                    "default": null
                              },
                              "harmonizer": {
                                    "type": [
                                          "string",
                                          "null"
                                    ],
                                    "default": null
                              },
                              "url": {
                                    "type": "string",
                                    "example": "https://portal.pedscommons.org/DD?view=table",
                                    "format": "uri"
                              }
                        },
                        "required": [
                              "method",
                              "harmonizer",
                              "url"
                        ]
                  },
                  "SubjectResponse": {
                        "type": "object",
                        "description": "Envelope containing source metadata, result list, and pagination info.",
                        "properties": {
                              "summary": {
                                    "$ref": "#/components/schemas/Summary"
                              },
                              "data": {
                                    "type": "array",
                                    "items": {
                                          "$ref": "#/components/schemas/Subject"
                                    }
                              },
                              "pagination": {
                                    "$ref": "#/components/schemas/PaginationInfo"
                              }
                        }
                  },
                  "Summary": {
                        "type": "object",
                        "description": "Top-level counts related to the current result set and overall corpus.",
                        "properties": {
                              "counts": {
                                    "$ref": "#/components/schemas/Counts"
                              }
                        }
                  },
                  "Counts": {
                        "type": "object",
                        "description": "Count metrics: all = total unique participants; current = items returned in this page.",
                        "properties": {
                              "all": {
                                    "type": "integer",
                                    "example": 25696
                              },
                              "current": {
                                    "type": "integer",
                                    "example": 20
                              }
                        }
                  },
                  "PaginationInfo": {
                        "type": "object",
                        "description": "Pagination metadata for client navigation.",
                        "properties": {
                              "page": {
                                    "type": "integer",
                                    "example": 1
                              },
                              "per_page": {
                                    "type": "integer",
                                    "example": 20
                              },
                              "total_pages": {
                                    "type": "integer",
                                    "example": 5225
                              },
                              "total_items": {
                                    "type": "integer",
                                    "example": 25696
                              },
                              "has_next": {
                                    "type": "boolean",
                                    "example": true
                              },
                              "has_prev": {
                                    "type": "boolean",
                                    "example": false
                              }
                        }
                  },
                  "SummaryCounts": {
                        "type": "object",
                        "description": "Summary counts structure.",
                        "properties": {
                              "total": {
                                    "type": "integer",
                                    "description": "Total entity count"
                              }
                        },
                        "required": [
                              "total"
                        ]
                  },
                  "SummaryResponse": {
                        "type": "object",
                        "description": "Summary-only response for endpoints that return aggregate counts.",
                        "properties": {
                              "counts": {
                                    "$ref": "#/components/schemas/SummaryCounts"
                              }
                        },
                        "required": [
                              "counts"
                        ]
                  },
                  "CountResponse": {
                        "type": "object",
                        "description": "Response for field counting endpoints with total, missing, and value counts.",
                        "properties": {
                              "total": {
                                    "type": "integer",
                                    "description": "Total counts of all unique participants matching filters",
                                    "example": 25696
                              },
                              "missing": {
                                    "type": "integer",
                                    "description": "Count of unique participants with null value in the field",
                                    "example": 1069
                              },
                              "values": {
                                    "type": "array",
                                    "description": "Count results for each distinct field value",
                                    "items": {
                                          "$ref": "#/components/schemas/CountResult"
                                    }
                              }
                        },
                        "required": [
                              "total",
                              "missing",
                              "values"
                        ]
                  },
                  "CountResult": {
                        "type": "object",
                        "description": "Count result for a specific field value.",
                        "properties": {
                              "value": {
                                    "type": "string",
                                    "description": "The field value",
                                    "example": "M"
                              },
                              "count": {
                                    "type": "integer",
                                    "description": "Number of unique participants with this value",
                                    "example": 15234
                              }
                        },
                        "required": [
                              "value",
                              "count"
                        ]
                  },
                  "ErrorsResponse": {
                        "type": "object",
                        "description": "Error response envelope containing a list of errors.",
                        "properties": {
                              "errors": {
                                    "type": "array",
                                    "items": {
                                          "$ref": "#/components/schemas/ErrorDetail"
                                    }
                              }
                        },
                        "required": [
                              "errors"
                        ]
                  },
                  "ErrorDetail": {
                        "type": "object",
                        "description": "Individual error detail. Fields vary by error kind.",
                        "properties": {
                              "kind": {
                                    "type": "string",
                                    "description": "Error kind identifier",
                                    "enum": [
                                          "InvalidRoute",
                                          "InvalidParameters",
                                          "NotFound",
                                          "UnshareableData",
                                          "UnsupportedField"
                                    ],
                                    "example": "NotFound"
                              },
                              "method": {
                                    "type": "string",
                                    "description": "HTTP method (for InvalidRoute errors)",
                                    "example": "GET"
                              },
                              "route": {
                                    "type": "string",
                                    "nullable": true,
                                    "description": "Invalid route path (for InvalidRoute errors - not included in responses for security)",
                                    "example": null
                              },
                              "parameters": {
                                    "type": "array",
                                    "description": "List of invalid parameter names (for InvalidParameters errors)",
                                    "items": {
                                          "type": "string"
                                    },
                                    "example": [
                                          "id"
                                    ]
                              },
                              "message": {
                                    "type": "string",
                                    "description": "Error message explaining what went wrong",
                                    "example": "The parameter was a non-integer value."
                              },
                              "entity": {
                                    "type": "string",
                                    "description": "Entity type or identifier (for NotFound/UnshareableData errors)",
                                    "example": "Samples"
                              },
                              "field": {
                                    "type": "string",
                                    "description": "Field name (for UnsupportedField errors)",
                                    "example": "field"
                              },
                              "reason": {
                                    "type": "string",
                                    "description": "Reason for the error (for InvalidParameters, NotFound, UnshareableData, and UnsupportedField errors)",
                                    "example": "This field is not present for subjects."
                              }
                        },
                        "oneOf": [
                              {
                                    "type": "object",
                                    "required": [
                                          "kind",
                                          "method",
                                          "message"
                                    ]
                              },
                              {
                                    "type": "object",
                                    "required": [
                                          "kind",
                                          "parameters",
                                          "message",
                                          "reason"
                                    ]
                              },
                              {
                                    "type": "object",
                                    "required": [
                                          "kind",
                                          "entity",
                                          "message",
                                          "reason"
                                    ]
                              },
                              {
                                    "type": "object",
                                    "required": [
                                          "kind",
                                          "entity",
                                          "message",
                                          "reason"
                                    ]
                              },
                              {
                                    "type": "object",
                                    "required": [
                                          "kind",
                                          "field",
                                          "message",
                                          "reason"
                                    ]
                              }
                        ]
                  },
                  "DepositionAccession": {
                        "type": "object",
                        "description": "Deposition accession with repository kind and value.",
                        "properties": {
                              "kind": {
                                    "type": "string",
                                    "description": "Repository type",
                                    "example": "dbGaP"
                              },
                              "value": {
                                    "type": "string",
                                    "description": "Accession value",
                                    "example": "phs002356"
                              }
                        },
                        "required": [
                              "kind",
                              "value"
                        ]
                  },
                  "NamespaceMetadata": {
                        "type": "object",
                        "description": "Namespace metadata with study information.",
                        "properties": {
                              "study_short_title": {
                                    "type": "object",
                                    "description": "Study short title",
                                    "nullable": true,
                                    "properties": {
                                          "value": {
                                                "type": "string",
                                                "example": "short title here"
                                          }
                                    },
                                    "required": [
                                          "value"
                                    ]
                              },
                              "study_name": {
                                    "type": "object",
                                    "description": "Study name",
                                    "nullable": true,
                                    "properties": {
                                          "value": {
                                                "type": "string",
                                                "example": "name here"
                                          }
                                    },
                                    "required": [
                                          "value"
                                    ]
                              },
                              "study_id": {
                                    "type": "object",
                                    "description": "Study identifier",
                                    "nullable": true,
                                    "properties": {
                                          "value": {
                                                "type": "string",
                                                "example": "phs002356"
                                          }
                                    },
                                    "required": [
                                          "value"
                                    ]
                              },
                              "study_funding_id": {
                                    "type": "array",
                                    "description": "Study funding identifiers",
                                    "nullable": true,
                                    "items": {
                                          "type": "object",
                                          "properties": {
                                                "value": {
                                                      "type": "string",
                                                      "example": "fund here"
                                                }
                                          },
                                          "required": [
                                                "value"
                                          ]
                                    }
                              },
                              "depositions": {
                                    "type": "array",
                                    "description": "Array of deposition objects containing study_id values",
                                    "nullable": true,
                                    "items": {
                                          "$ref": "#/components/schemas/DepositionAccession"
                                    }
                              }
                        }
                  },
                  "NamespaceEntity": {
                        "type": "object",
                        "description": "Namespace entity with identifier, description, and metadata.",
                        "properties": {
                              "id": {
                                    "$ref": "#/components/schemas/NamespaceIdentifier"
                              },
                              "description": {
                                    "type": "string",
                                    "description": "Human-readable description of the namespace",
                                    "example": "Namespace for CCDI-DCC phs studies"
                              },
                              "contact_email": {
                                    "type": "string",
                                    "format": "email",
                                    "description": "Contact email for namespace support",
                                    "example": "support@ccdi.org"
                              },
                              "metadata": {
                                    "$ref": "#/components/schemas/NamespaceMetadata",
                                    "nullable": true
                              }
                        },
                        "required": [
                              "id",
                              "description",
                              "contact_email"
                        ]
                  },
                  "NamespaceIdentifier": {
                        "type": "object",
                        "description": "Namespace identifier composed of organization and name.",
                        "properties": {
                              "organization": {
                                    "type": "string",
                                    "description": "Organization identifier",
                                    "example": "CCDI-DCC",
                                    "const": "CCDI-DCC"
                              },
                              "name": {
                                    "type": "string",
                                    "description": "Namespace name (study identifier)",
                                    "example": "phs"
                              }
                        },
                        "required": [
                              "organization",
                              "name"
                        ]
                  },
                  "OrganizationEntity": {
                        "type": "object",
                        "description": "Organization entity with identifier, name, and metadata.",
                        "properties": {
                              "identifier": {
                                    "type": "string",
                                    "description": "Organization identifier",
                                    "example": "CCDI-DCC",
                                    "const": "CCDI-DCC"
                              },
                              "name": {
                                    "type": "string",
                                    "description": "Human-readable organization name",
                                    "example": "Childhood Cancer Data Initiative Data Coordinating Center"
                              },
                              "metadata": {
                                    "type": "object",
                                    "description": "Additional organization metadata",
                                    "nullable": true
                              }
                        },
                        "required": [
                              "identifier",
                              "name"
                        ]
                  },
                  "NamespacesResponse": {
                        "type": "object",
                        "description": "Response containing a list of namespaces.",
                        "properties": {
                              "namespaces": {
                                    "type": "array",
                                    "items": {
                                          "$ref": "#/components/schemas/NamespaceEntity"
                                    }
                              }
                        },
                        "required": [
                              "namespaces"
                        ]
                  },
                  "NamespaceResponse": {
                        "type": "object",
                        "description": "Response containing a single namespace.",
                        "properties": {
                              "namespace": {
                                    "$ref": "#/components/schemas/NamespaceEntity"
                              }
                        },
                        "required": [
                              "namespace"
                        ]
                  },
                  "OrganizationsResponse": {
                        "type": "object",
                        "description": "Response containing a list of organizations.",
                        "properties": {
                              "organizations": {
                                    "type": "array",
                                    "items": {
                                          "$ref": "#/components/schemas/OrganizationEntity"
                                    }
                              }
                        },
                        "required": [
                              "organizations"
                        ]
                  },
                  "OrganizationResponse": {
                        "type": "object",
                        "description": "Response containing a single organization.",
                        "properties": {
                              "organization": {
                                    "$ref": "#/components/schemas/OrganizationEntity"
                              }
                        },
                        "required": [
                              "organization"
                        ]
                  },
                  "Error": {
                        "type": "object",
                        "description": "Standard error envelope (legacy - use ErrorsResponse).",
                        "properties": {
                              "detail": {
                                    "type": "string",
                                    "example": "Subject not found"
                              }
                        }
                  },
                  "MetadataFieldInfo": {
                        "type": "object",
                        "description": "Metadata field information.",
                        "properties": {
                              "path": {
                                    "type": "string",
                                    "description": "Field path",
                                    "example": "sex"
                              },
                              "harmonized": {
                                    "type": "boolean",
                                    "description": "Whether the field is harmonized",
                                    "example": true
                              },
                              "wiki_url": {
                                    "type": "string",
                                    "description": "Wiki URL for field documentation",
                                    "example": "https://github.com/CBIIT/ccdi-federation-api/wiki/Subject-Metadata-Fields#sex",
                                    "format": "uri"
                              },
                              "standard": {
                                    "$ref": "#/components/schemas/HarmonizedStandard"
                              }
                        },
                        "required": [
                              "path",
                              "harmonized",
                              "wiki_url",
                              "standard"
                        ]
                  },
                  "HarmonizedStandard": {
                        "type": "object",
                        "description": "Standard to which a field is harmonized.",
                        "properties": {
                              "name": {
                                    "type": [
                                          "string",
                                          "null"
                                    ],
                                    "description": "Standard name",
                                    "example": "caDSR CDE 6343385 v1.00"
                              },
                              "url": {
                                    "type": [
                                          "string",
                                          "null"
                                    ],
                                    "description": "Standard URL",
                                    "example": "https://cadsr.cancer.gov/onedata/dmdirect/NIH/NCI/CO/CDEDD?filter=CDEDD.ITEM_ID=6343385%20and%20ver_nr=1",
                                    "format": "uri"
                              }
                        },
                        "required": [
                              "name",
                              "url"
                        ]
                  },
                  "MetadataFieldsInfoResponse": {
                        "type": "object",
                        "description": "Response for /metadata/fields/{field_type} endpoint.",
                        "properties": {
                              "fields": {
                                    "type": "array",
                                    "description": "List of metadata fields",
                                    "items": {
                                          "$ref": "#/components/schemas/MetadataFieldInfo"
                                    }
                              }
                        },
                        "required": [
                              "fields"
                        ]
                  },
                  "InfoResponse": {
                        "type": "object",
                        "description": "API information response containing server, API, and data details.",
                        "properties": {
                              "server": {
                                    "$ref": "#/components/schemas/ServerInfo"
                              },
                              "api": {
                                    "$ref": "#/components/schemas/ApiInfo"
                              },
                              "data": {
                                    "$ref": "#/components/schemas/DataInfo"
                              }
                        },
                        "required": [
                              "server",
                              "api",
                              "data"
                        ]
                  },
                  "ServerInfo": {
                        "type": "object",
                        "description": "Server information.",
                        "properties": {
                              "name": {
                                    "type": "string",
                                    "example": "CCDI-DCC"
                              },
                              "version": {
                                    "type": "string",
                                    "example": "v1.0"
                              },
                              "owner": {
                                    "type": "string",
                                    "example": "Childhood Cancer Data Initiative Data Coordinating Center"
                              },
                              "contact_email": {
                                    "type": "string",
                                    "format": "email",
                                    "example": "NCIChildhoodCancerDataInitiative@mail.nih.gov"
                              }
                        },
                        "required": [
                              "name",
                              "version",
                              "owner",
                              "contact_email"
                        ]
                  },
                  "ApiInfo": {
                        "type": "object",
                        "description": "API information.",
                        "properties": {
                              "api_version": {
                                    "type": "string",
                                    "example": "v1.2.0"
                              },
                              "documentation_url": {
                                    "type": "string",
                                    "format": "uri",
                                    "example": "https://cbiit.github.io/ccdi-federation-api/"
                              }
                        },
                        "required": [
                              "api_version",
                              "documentation_url"
                        ]
                  },
                  "DataInfo": {
                        "type": "object",
                        "description": "Data information.",
                        "properties": {
                              "version": {
                                    "$ref": "#/components/schemas/DataVersion"
                              },
                              "last_updated": {
                                    "type": "string",
                                    "example": "September 12, 2025"
                              },
                              "wiki_url": {
                                    "type": "string",
                                    "format": "uri",
                                    "example": "https://github.com/CBIIT/ccdi-federation-api-spec/wiki"
                              },
                              "documentation_url": {
                                    "type": "string",
                                    "format": "uri",
                                    "example": "https://cbiit.github.io/ccdi-dcc-federation-service/docs/index.html"
                              }
                        },
                        "required": [
                              "version",
                              "last_updated",
                              "wiki_url",
                              "documentation_url"
                        ]
                  },
                  "DataVersion": {
                        "type": "object",
                        "description": "Data version information.",
                        "properties": {
                              "version": {
                                    "type": "string",
                                    "example": "3.1.0"
                              },
                              "about_url": {
                                    "type": "string",
                                    "format": "uri",
                                    "example": "https://cbiit.github.io/crdc-data-model-navigator/?config=https://raw.githubusercontent.com/CBIIT/ccdi-dcc-model/refs/heads/main/"
                              }
                        },
                        "required": [
                              "version",
                              "about_url"
                        ]
                  }
            }
      },
      "tags": [
            {
                  "name": "Subject",
                  "description": "Subjects within the CCDI federated ecosystem."
            },
            {
                  "name": "Metadata",
                  "description": "Metadata field information for subjects, samples, and files."
            },
            {
                  "name": "Namespace",
                  "description": "List and describe namespaces known by this server."
            },
            {
                  "name": "Organization",
                  "description": "List and describe organizations known by this server."
            },
            {
                  "name": "Info",
                  "description": "API information including server, API, and data details."
            },
            {
                  "name": "Convenience",
                  "description": "Convenience endpoints for API root and version information."
            },
            {
                  "name": "Errors",
                  "description": "Error response examples and documentation."
            }
      ]
};

    // Helper: get ?url=... if provided
    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    // Defer init until both scripts are parsed (we used defer on script tags)
    document.addEventListener('DOMContentLoaded', function () {
      const externalUrl = getQueryParam('url');

      const ui = SwaggerUIBundle({
        // If ?url= is provided, use it; otherwise use the embedded spec
        ...(externalUrl
          ? { url: externalUrl }
          : { spec: embeddedSpec }),

        dom_id: '#swagger-ui',
        deepLinking: true,

        // UI polish
        docExpansion: 'none',            // collapse sections by default
        defaultModelsExpandDepth: -1,    // hide the big "Schemas" sidebar section

        // Presets/plugins
        presets: [
          SwaggerUIBundle.presets.apis,
          SwaggerUIStandalonePreset
        ],
        plugins: [
          SwaggerUIBundle.plugins.DownloadUrl
        ],
        layout: 'StandaloneLayout',

        // Disable external validator ping
        validatorUrl: null,

        // Enable "Try it out"
        tryItOutEnabled: true,
        supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch']
      });

      window.ui = ui;
    });
  </script>
</body>
</html>